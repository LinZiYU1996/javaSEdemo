


指令重排是什么

指令队列在CPU执行时不是串行的, 当某条指令执行时消耗较多时间时, CPU资源足够时并不会在此无意义的等待, 而是开启下一个指令. 开启下一条指令是有条件的, 即上一条指令和下一条指令不存在相关性


a /= 2;   // 指令A
a /= 2;   // 指令B
c++;      // 指令C


这里的指令B是依赖于指令A的执行结果的,
在A处于执行阶段时, B会被阻塞,
直到A执行完成. 而指令C与A/B均没有依赖关系,
所以在A执行或者B执行的过程中, C会同时被执行,
那么C有可能在A+B的执行过程中就执行完毕了,
这样指令队列的实际执行顺序就是 C->A->B 或者 A->C->B.
