

volatile关键字：

能够保证volatile变量的可见性
不能保证volatile变量的原子性


volatile如何实现内存可见性：
深入来说：通过加入内存屏障和禁止重排序优化来实现的。
对volatile变量执行写操作时，会在写操作后加入一条store屏障指令

store指令会在写操作后把最新的值强制刷新到主内存中。同时还会禁止cpu对代码进行重排序优化。这样就保证了值在主内存中是最新的。
对volatile变量执行读操作时，会在读操作前加入一条load屏障指令

load指令会在读操作前把内存缓存中的值清空后，再从主内存中读取最新的值。